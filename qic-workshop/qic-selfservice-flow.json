{
  "Version": "2019-10-30",
  "StartAction": "2150e27b-084c-4731-9803-fda448ac8e46",
  "Metadata": {
    "entryPointPosition": {
      "x": -368.8,
      "y": 152.8
    },
    "ActionMetadata": {
      "bd66749a-bec8-4b11-a9ff-12273dcc72b6": {
        "position": {
          "x": -27.2,
          "y": 141.6
        },
        "children": [
          "b5c516d4-ce69-48d0-bf79-eb80f728f57b"
        ],
        "parameters": {
          "WisdomAssistantArn": {
            "displayName": "arn:aws:wisdom:us-east-1:875281917042:assistant/cccc4372-94dc-458c-b0ef-4669b2d91fa6"
          }
        },
        "fragments": {
          "SetContactData": "b5c516d4-ce69-48d0-bf79-eb80f728f57b"
        }
      },
      "b5c516d4-ce69-48d0-bf79-eb80f728f57b": {
        "position": {
          "x": -27.2,
          "y": 141.6
        },
        "dynamicParams": []
      },
      "7a7eb38e-243e-4d20-a436-4b2be68d3cd0": {
        "position": {
          "x": 1902.4,
          "y": 327.2
        }
      },
      "077d3782-b539-4481-8aa5-6ad4e5c0c646": {
        "position": {
          "x": 1224.8,
          "y": 651.2
        }
      },
      "5bf4301c-3d20-4694-8011-8fa742369dd7": {
        "position": {
          "x": 1663.2,
          "y": 324
        },
        "parameters": {
          "QueueId": {
            "displayName": "BasicQueue"
          }
        },
        "queue": {
          "text": "BasicQueue"
        }
      },
      "8c831bfa-e31f-4a16-b10b-4013691a8f2d": {
        "position": {
          "x": 1434.4,
          "y": 327.2
        },
        "parameters": {
          "EventHooks": {
            "DefaultAgentUI": {
              "displayName": "qic-agent-screenpop"
            }
          }
        }
      },
      "3fab9715-459c-481a-b69c-5b627ddfca7d": {
        "position": {
          "x": 1206.4,
          "y": 324.8
        },
        "parameters": {
          "Attributes": {
            "qicSummaryOut": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "qicSummaryOut"
        ]
      },
      "93da9ac3-2133-4ef7-9aff-6a86804c029d": {
        "position": {
          "x": 1242.4,
          "y": 70.4
        }
      },
      "6a0c8f4e-e3d0-436a-9f55-0a8a299f6f74": {
        "position": {
          "x": 944.8,
          "y": 644.8
        }
      },
      "de08ce0f-dd11-402c-b56a-73867d928bef": {
        "position": {
          "x": 984.8,
          "y": 328.8
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "li2-qic-assets-LambdaQiCTextParser-XkDSW0VrXZug"
          },
          "LambdaInvocationAttributes": {
            "qicSummaryIn": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "qicSummaryIn": true
        }
      },
      "42b454c3-94c8-4ec4-9061-9983b10adeb5": {
        "position": {
          "x": 974.4,
          "y": -226.4
        },
        "parameters": {
          "ViewResource": {
            "Id": {
              "displayName": "cardguide-view"
            }
          },
          "InvocationTimeLimitSeconds": {
            "unit": 1
          }
        }
      },
      "ba168c1b-0111-48b9-9462-35ef84d6cbcd": {
        "position": {
          "x": 1391.2,
          "y": -602.4
        }
      },
      "a5834d52-2b7d-4171-aa5a-d1b6e8caa4ef": {
        "position": {
          "x": 884,
          "y": -700
        },
        "parameters": {
          "LexV2Bot": {
            "AliasArn": {
              "displayName": "TestBotAlias",
              "useLexBotDropdown": true,
              "lexV2BotName": "bank-transaction-bot"
            }
          }
        },
        "useLexBotDropdown": true,
        "lexV2BotName": "bank-transaction-bot",
        "lexV2BotAliasName": "TestBotAlias",
        "conditionMetadata": [
          {
            "id": "544dfa71-403b-469b-9190-477795500fe7",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "MoneyTransferIntent"
          },
          {
            "id": "23de6875-d14d-4eeb-9d6e-6aa4d4b35ac3",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "FallbackIntent"
          }
        ]
      },
      "a738e372-9a56-42fd-92da-7eccdba0f6c3": {
        "position": {
          "x": 1347.2,
          "y": -402.4
        }
      },
      "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452": {
        "position": {
          "x": 2214.4,
          "y": 396
        }
      },
      "2150e27b-084c-4731-9803-fda448ac8e46": {
        "position": {
          "x": -255.2,
          "y": 138.4
        }
      },
      "5027604b-6d27-4967-8784-b8dbbadc796a": {
        "position": {
          "x": 1236,
          "y": -180.8
        },
        "dynamicParams": []
      },
      "2578f82a-cfe6-43d7-a3c7-1ca05dc0113d": {
        "position": {
          "x": 1465.6,
          "y": -807.2
        },
        "dynamicParams": []
      },
      "11f4e1e6-a3d2-48fb-a6aa-8d4ed460267f": {
        "position": {
          "x": 705.6,
          "y": -201.6
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "ae1fb5fb-5f33-424b-99c7-21e9154932f8",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "BANK_TRANSACTION_BOT"
          },
          {
            "id": "cd28522c-9aeb-4acd-8a0f-e264d86631a2",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "CREDIT_CARD_GUIDE"
          },
          {
            "id": "31bd98de-0d9e-4c89-b3bf-bedca5699b14",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "HANDOFF"
          }
        ]
      },
      "202da01a-9dac-40ad-bc49-4e15596fd2a3": {
        "position": {
          "x": 676.8,
          "y": 807.2
        }
      },
      "7881b3a5-49f1-4925-b792-b14d162e990a": {
        "position": {
          "x": 216.8,
          "y": 139.2
        },
        "dynamicParams": []
      },
      "680663fc-0b4a-46d7-ae15-5720905fecb7": {
        "position": {
          "x": 490.4,
          "y": 138.4
        },
        "parameters": {
          "LexV2Bot": {
            "AliasArn": {
              "displayName": "TestBotAlias",
              "useLexBotDropdown": true,
              "lexV2BotName": "anyfsi-bot"
            }
          }
        },
        "useLexBotDropdown": true,
        "lexV2BotName": "anyfsi-bot",
        "lexV2BotAliasName": "TestBotAlias",
        "conditionMetadata": []
      }
    },
    "Annotations": [],
    "name": "qic-selfservice-flow",
    "description": "Amazon Q in Connect workshop. This Flow is used for building the user experience.",
    "type": "contactFlow",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "WisdomAssistantArn": "arn:aws:wisdom:us-east-1:875281917042:assistant/cccc4372-94dc-458c-b0ef-4669b2d91fa6"
      },
      "Identifier": "bd66749a-bec8-4b11-a9ff-12273dcc72b6",
      "Type": "CreateWisdomSession",
      "Transitions": {
        "NextAction": "b5c516d4-ce69-48d0-bf79-eb80f728f57b",
        "Errors": [
          {
            "NextAction": "7881b3a5-49f1-4925-b792-b14d162e990a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "WisdomSessionArn": "$.Wisdom.SessionArn"
      },
      "Identifier": "b5c516d4-ce69-48d0-bf79-eb80f728f57b",
      "Type": "UpdateContactData",
      "Transitions": {
        "NextAction": "7881b3a5-49f1-4925-b792-b14d162e990a",
        "Errors": [
          {
            "NextAction": "7881b3a5-49f1-4925-b792-b14d162e990a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "7a7eb38e-243e-4d20-a436-4b2be68d3cd0",
      "Type": "TransferContactToQueue",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "QueueAtCapacity"
          },
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Thank you for choosing the Amzon Q in Connect self-service. Goodbye."
      },
      "Identifier": "077d3782-b539-4481-8aa5-6ad4e5c0c646",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "QueueId": "arn:aws:connect:us-east-1:875281917042:instance/0a87be2d-b0a8-4579-9cdc-0c519ed50b80/queue/c3db0f10-7882-4ff9-87ee-32dae4671a07"
      },
      "Identifier": "5bf4301c-3d20-4694-8011-8fa742369dd7",
      "Type": "UpdateContactTargetQueue",
      "Transitions": {
        "NextAction": "7a7eb38e-243e-4d20-a436-4b2be68d3cd0",
        "Errors": [
          {
            "NextAction": "7a7eb38e-243e-4d20-a436-4b2be68d3cd0",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "EventHooks": {
          "DefaultAgentUI": "arn:aws:connect:us-east-1:875281917042:instance/0a87be2d-b0a8-4579-9cdc-0c519ed50b80/contact-flow/3058ac7a-92fe-440d-b8f8-75bf9375229f"
        }
      },
      "Identifier": "8c831bfa-e31f-4a16-b10b-4013691a8f2d",
      "Type": "UpdateContactEventHooks",
      "Transitions": {
        "NextAction": "5bf4301c-3d20-4694-8011-8fa742369dd7",
        "Errors": [
          {
            "NextAction": "5bf4301c-3d20-4694-8011-8fa742369dd7",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "qicSummaryOut": "$.External.qicSummaryOut"
        },
        "TargetContact": "Current"
      },
      "Identifier": "3fab9715-459c-481a-b69c-5b627ddfca7d",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "8c831bfa-e31f-4a16-b10b-4013691a8f2d",
        "Errors": [
          {
            "NextAction": "8c831bfa-e31f-4a16-b10b-4013691a8f2d",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Something has happened while processing the view"
      },
      "Identifier": "93da9ac3-2133-4ef7-9aff-6a86804c029d",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Amazon Q in Connect is still learning. This intent does not exist yet."
      },
      "Identifier": "6a0c8f4e-e3d0-436a-9f55-0a8a299f6f74",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "077d3782-b539-4481-8aa5-6ad4e5c0c646",
        "Errors": [
          {
            "NextAction": "077d3782-b539-4481-8aa5-6ad4e5c0c646",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:us-east-1:875281917042:function:li2-qic-assets-LambdaQiCTextParser-XkDSW0VrXZug",
        "InvocationTimeLimitSeconds": "3",
        "LambdaInvocationAttributes": {
          "qicSummaryIn": "$.Lex.SessionAttributes.summary"
        },
        "ResponseValidation": {
          "ResponseType": "STRING_MAP"
        }
      },
      "Identifier": "de08ce0f-dd11-402c-b56a-73867d928bef",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "3fab9715-459c-481a-b69c-5b627ddfca7d",
        "Errors": [
          {
            "NextAction": "3fab9715-459c-481a-b69c-5b627ddfca7d",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ViewResource": {
          "Id": "arn:aws:connect:us-east-1:875281917042:instance/0a87be2d-b0a8-4579-9cdc-0c519ed50b80/view/44e75ca1-f0a2-4da5-a41d-0fca0d476683:$LATEST"
        },
        "InvocationTimeLimitSeconds": "300",
        "ViewData": {}
      },
      "Identifier": "42b454c3-94c8-4ec4-9061-9983b10adeb5",
      "Type": "ShowView",
      "Transitions": {
        "NextAction": "93da9ac3-2133-4ef7-9aff-6a86804c029d",
        "Conditions": [
          {
            "NextAction": "5027604b-6d27-4967-8784-b8dbbadc796a",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ActionSelected"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "93da9ac3-2133-4ef7-9aff-6a86804c029d",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "93da9ac3-2133-4ef7-9aff-6a86804c029d",
            "ErrorType": "NoMatchingError"
          },
          {
            "NextAction": "93da9ac3-2133-4ef7-9aff-6a86804c029d",
            "ErrorType": "TimeLimitExceeded"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "I am a AI bot and still learning. "
      },
      "Identifier": "ba168c1b-0111-48b9-9462-35ef84d6cbcd",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "Ok.  Tell me the amount in dollar you want me to transfer money?",
        "LexV2Bot": {
          "AliasArn": "arn:aws:lex:us-east-1:875281917042:bot-alias/JS84T40YPA/TSTALIASID"
        }
      },
      "Identifier": "a5834d52-2b7d-4171-aa5a-d1b6e8caa4ef",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "a738e372-9a56-42fd-92da-7eccdba0f6c3",
        "Conditions": [
          {
            "NextAction": "2578f82a-cfe6-43d7-a3c7-1ca05dc0113d",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "MoneyTransferIntent"
              ]
            }
          },
          {
            "NextAction": "ba168c1b-0111-48b9-9462-35ef84d6cbcd",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "FallbackIntent"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "ba168c1b-0111-48b9-9462-35ef84d6cbcd",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "a738e372-9a56-42fd-92da-7eccdba0f6c3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "An error has occurred with bank transaction bot"
      },
      "Identifier": "a738e372-9a56-42fd-92da-7eccdba0f6c3",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
      "Type": "EndFlowExecution",
      "Transitions": {}
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "2150e27b-084c-4731-9803-fda448ac8e46",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "bd66749a-bec8-4b11-a9ff-12273dcc72b6"
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "QiCAssistantPrompt": "Thank you. The data you have provided help our specialists to support you. Type 'specialist' to connect you with now. ",
          "ViewTravelFrequency": "$.Views.ViewResultData.TravelFrequency.0",
          "ViewPurchaseFrequency": "$.Views.ViewResultData.PurchaseFrequency.0",
          "ViewLoyaltyBonus": "$.Views.ViewResultData.LoyaltyBonus",
          "ViewStudent": "$.Views.ViewResultData.Student"
        },
        "TargetContact": "Current"
      },
      "Identifier": "5027604b-6d27-4967-8784-b8dbbadc796a",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
        "Errors": [
          {
            "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "QiCAssistantPrompt": "Is there anything else I can help you with?"
        },
        "TargetContact": "Current"
      },
      "Identifier": "2578f82a-cfe6-43d7-a3c7-1ca05dc0113d",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
        "Errors": [
          {
            "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Lex.SessionAttributes.Tool"
      },
      "Identifier": "11f4e1e6-a3d2-48fb-a6aa-8d4ed460267f",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "6a0c8f4e-e3d0-436a-9f55-0a8a299f6f74",
        "Conditions": [
          {
            "NextAction": "a5834d52-2b7d-4171-aa5a-d1b6e8caa4ef",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "BANK_TRANSACTION_BOT"
              ]
            }
          },
          {
            "NextAction": "42b454c3-94c8-4ec4-9061-9983b10adeb5",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "CREDIT_CARD_GUIDE"
              ]
            }
          },
          {
            "NextAction": "de08ce0f-dd11-402c-b56a-73867d928bef",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "HANDOFF"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "6a0c8f4e-e3d0-436a-9f55-0a8a299f6f74",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "An error has occurred with Q in Connect Assistant"
      },
      "Identifier": "202da01a-9dac-40ad-bc49-4e15596fd2a3",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
        "Errors": [
          {
            "NextAction": "69c3e5c4-949f-4adc-b3b8-ad2f72a8d452",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "QiCAssistantPrompt": "What can I help you with today?"
        },
        "TargetContact": "Current"
      },
      "Identifier": "7881b3a5-49f1-4925-b792-b14d162e990a",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
        "Errors": [
          {
            "NextAction": "680663fc-0b4a-46d7-ae15-5720905fecb7",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "SSML": "<speak></speak>",
        "LexV2Bot": {
          "AliasArn": "arn:aws:lex:us-east-1:875281917042:bot-alias/P0GXY2SCJO/TSTALIASID"
        }
      },
      "Identifier": "680663fc-0b4a-46d7-ae15-5720905fecb7",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "202da01a-9dac-40ad-bc49-4e15596fd2a3",
        "Errors": [
          {
            "NextAction": "11f4e1e6-a3d2-48fb-a6aa-8d4ed460267f",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "202da01a-9dac-40ad-bc49-4e15596fd2a3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}